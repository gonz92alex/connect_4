var A=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var S=(n,e,t)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D=(n,e)=>{for(var t in e||(e={}))G.call(e,t)&&S(n,t,e[t]);if(P)for(var t of P(e))z.call(e,t)&&S(n,t,e[t]);return n},F=(n,e)=>E(n,I(e));var k=(n,e)=>{var t={};for(var l in n)G.call(n,l)&&e.indexOf(l)<0&&(t[l]=n[l]);if(n!=null&&P)for(var l of P(n))e.indexOf(l)<0&&z.call(n,l)&&(t[l]=n[l]);return t};var N=(n,e,t)=>(S(n,typeof e!="symbol"?e+"":e,t),t);import{j as O,r as h,R as V,a as W}from"./vendor.77a74456.js";const M=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};M();const T="_container_1y1ff_1",q="_board_1y1ff_14",H="_player1_1y1ff_23",K="_player2_1y1ff_27";var R={container:T,board:q,player1:H,player2:K};const J="_title_1k046_1",Q="_fieldset_1k046_5";var $={title:J,fieldset:Q};const o=O.exports.jsx,_=O.exports.jsxs;function U(r){var s=r,{winnerName:n,doReset:e,toConfig:t}=s,l=k(s,["winnerName","doReset","toConfig"]);return _("div",{className:$.container,children:[_("h1",{className:$.title,children:["The winner is ",n]}),_("fieldset",{className:$.fieldset,children:[o("button",{className:$.button,onClick:e,children:"New Game"}),o("button",{className:$.button,onClick:t,children:"Go to configuration"})]})]})}const Z="_container_k4tpa_1",X="_title_k4tpa_9",Y="_subtitle_k4tpa_14",ee="_form_k4tpa_18",te="_fieldset_k4tpa_24",ne="_input_k4tpa_31",le="_button_k4tpa_35";var u={container:Z,title:X,subtitle:Y,form:ee,fieldset:te,input:ne,button:le};function re(i){var f=i,{player1:n,player2:e,x:t,y:l,newGame:r}=f,s=k(f,["player1","player2","x","y","newGame"]);const a=h.exports.useRef(null),x=h.exports.useRef(null),p=h.exports.useRef(null),c=h.exports.useRef(null);function y(v){var d,g;v.preventDefault();let b=+((d=p==null?void 0:p.current)==null?void 0:d.value),w=+((g=c==null?void 0:c.current)==null?void 0:g.value),C=a.current.value||n,m=x.current.value||e;r(C,m,b,w)}return _("div",{className:u.container,children:[o("h1",{className:u.title,children:"Welcome to connect 4"}),o("p",{className:u.subtitle,children:"Please imput your game settings"}),_("form",{className:u.form,children:[_("fieldset",{className:u.fielset,children:[o("label",{htmlFor:"player1",children:"Player1's name:"}),o("input",{className:u.input,type:"text",name:"player1",id:"player1",defaultValue:n,ref:a})]}),_("fieldset",{className:u.fielset,children:[o("label",{htmlFor:"player2",children:"Player1's name:"}),o("input",{className:u.input,type:"text",name:"player2",id:"player2",defaultValue:e,ref:x})]}),_("fieldset",{className:u.fielset,children:[o("label",{htmlFor:"x",children:"Number of columns:"}),o("input",{className:u.input,type:"number",name:"x",id:"x",defaultValue:t,ref:p,min:"4"})]}),_("fieldset",{className:u.fielset,children:[o("label",{htmlFor:"y",children:"Number of rows:"}),o("input",{className:u.input,type:"number",name:"y",id:"y",defaultValue:l,ref:c,min:"4"})]}),o("button",{onClick:y,className:u.button,children:"New Game"})]})]})}class se{constructor(e=6){N(this,"column");N(this,"nextRow",0);N(this,"put_piece",e=>{if(this.nextRow!==this.column.length)return this.column[this.nextRow]=e,this.nextRow+=1,this.nextRow-1;throw console.log(this.nextRow===this.column.length),new Error("End of column")});this.column=Array(e).fill(0)}get length(){return this.column.length}}class L{constructor(e=7,t=6){N(this,"winner",0);N(this,"columns");N(this,"put_piece",(e,t)=>{try{const l=this.columns[e].put_piece(t);return this.is_winner(e,l,t)}catch(l){alert("Invalid move"),console.log(l)}});N(this,"is_winner",(e,t,l)=>{if(t>=3&&this.columns[e].column.slice(t-3,t).every(y=>y===l))return!0;const r=this.get_row(t);let s=0,i;for(let c of r){if(c===l&&(i===void 0||i!==c?s=1:s+=1,s>=4))return!0;i=c}let[f,a,x,p]=[1,1,1,1];for(let c=1;c<=3;c++){let y=e-c,v=e+c,b=t-c,w=t+c;if(this.check_hole(b,y,l)&&(a+=1,a===4)||this.check_hole(w,y,l)&&(f+=1,f===4)||this.check_hole(b,v,l)&&(p+=1,p===4)||this.check_hole(w,v,l)&&(x+=1,x===4))return!0}return!1});N(this,"get_board",()=>this.columns.map(e=>e.column));this.columns=Array(e).fill(0).map(l=>new se(t))}get_row(e){return this.columns.map(t=>t.column[e])}check_hole(e,t,l){if(t>0&&t<this.columns.length&&e>=0&&e<this.columns[t].column.length&&this.columns[t].column[e]===l)return!0}}const oe="_hole_1lgoz_1",ie="_piece_1lgoz_11",ce="_player1_1lgoz_19",ae="_player2_1lgoz_23",ue="_empty_1lgoz_27";var j={hole:oe,piece:ie,player1:ce,player2:ae,empty:ue};function fe(l){var r=l,{player:n,clickPiece:e}=r,t=k(r,["player","clickPiece"]);const{player1:s,player2:i,empty:f}=j,a=n===1?s:n===2?i:f;return o("div",F(D({className:j.hole},t),{onClick:x=>e(),children:o("div",{className:`${j.piece} ${a}`})}))}const me="_column_bj07r_1";var pe={column:me};function de(r){var s=r,{column:n,column_id:e,clickColumn:t}=s,l=k(s,["column","column_id","clickColumn"]);function i(){return t(e)}return o("div",{className:pe.column,children:n.map((f,a)=>o(fe,{player:f,column_id:a,clickPiece:i},a))})}function he(){const[n,e]=h.exports.useState(!0),[t,l]=h.exports.useState({x:7,y:6}),[r,s]=h.exports.useState(new L(t.x,t.y)),[i,f]=h.exports.useState(1),[a,x]=h.exports.useState(0),[p,c]=h.exports.useState("Player 1"),[y,v]=h.exports.useState("Player 2");function b(m,d=t.x,g=t.y){m&&m.preventDefault(),console.log(t,new Date),s(new L(d,g)),f(1),x(0)}function w(m,d,g,B){c(m),v(d),l({x:g,y:B}),e(!1),b(void 0,g,B)}function C(m){let d=r.put_piece(m,i);s(r),d&&x(i),f(i===1?2:1)}return n===!1?a===0?_("div",{className:R.container,children:[o("div",{children:_("h1",{children:["Turn: ",o("span",{className:`${R.player} ${i===1?R.player1:R.player2}`,children:i===1?p:y})]})}),o("div",{className:R.board,children:r.get_board().map((m,d)=>o(de,{column:m,column_id:d,clickColumn:C},d))})]}):o(U,{winnerName:a===1?p:y,doReset:b,toConfig:m=>{m.preventDefault(),e(!0)}}):o(re,{player1:p,player2:y,x:t.x,y:t.y,newGame:w})}function _e(){return o(he,{})}V.render(o(W.StrictMode,{children:o(_e,{})}),document.getElementById("root"));
